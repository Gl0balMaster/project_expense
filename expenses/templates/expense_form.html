{% extends 'base.html' %}

{% block title %}{% if expense %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å{% else %}–î–æ–±–∞–≤–∏—Ç—å{% endif %} —Ä–∞—Å—Ö–æ–¥{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header {% if expense %}bg-warning{% else %}bg-success{% endif %} text-white">
                    <h4 class="mb-0">
                        <i class="bi {% if expense %}bi-pencil{% else %}bi-plus-circle{% endif %}"></i>
                        {% if expense %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—Ö–æ–¥{% else %}–î–æ–±–∞–≤–∏—Ç—å —Ä–∞—Å—Ö–æ–¥{% endif %}
                    </h4>
                </div>
                <div class="card-body">
                    <form method="post">
                        {% csrf_token %}
                        <div class="mb-3">
                            <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ <span class="text-danger">*</span></label>
                            <input type="text" class="form-control" name="title" 
                                   value="{{ expense.title|default:'' }}" 
                                   placeholder="–ù–∞ —á—Ç–æ –ø–æ—Ç—Ä–∞—Ç–∏–ª–∏?" required>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">–°—É–º–º–∞ (‚ÇΩ) <span class="text-danger">*</span></label>
                                <input type="number" step="0.01" min="0.01" class="form-control" name="amount" 
                                       value="{{ expense.amount|default:'' }}" 
                                       placeholder="1000.00" required>
                                <div class="form-text">–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É —Å –¥–≤—É–º—è –∑–Ω–∞–∫–∞–º–∏ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π</div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">–ö–∞—Ç–µ–≥–æ—Ä–∏—è <span class="text-danger">*</span></label>
                                <select class="form-control" name="category" required>
                                    <option value="food" {% if expense.category == "food" %}selected{% endif %}>üçî –ï–¥–∞</option>
                                    <option value="transport" {% if expense.category == "transport" %}selected{% endif %}>üöó –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç</option>
                                    <option value="entertainment" {% if expense.category == "entertainment" %}selected{% endif %}>üé¨ –†–∞–∑–≤–ª–µ—á–µ–Ω–∏—è</option>
                                    <option value="utilities" {% if expense.category == "utilities" %}selected{% endif %}>üè† –ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏</option>
                                    <option value="shopping" {% if expense.category == "shopping" %}selected{% endif %}>üõçÔ∏è –ü–æ–∫—É–ø–∫–∏</option>
                                    <option value="health" {% if expense.category == "health" %}selected{% endif %}>üè• –ó–¥–æ—Ä–æ–≤—å–µ</option>
                                    <option value="education" {% if expense.category == "education" %}selected{% endif %}>üìö –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ</option>
                                    <option value="other" {% if expense.category == "other" or not expense %}selected{% endif %}>üì¶ –î—Ä—É–≥–æ–µ</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                            <textarea class="form-control" name="description" rows="4" 
                                      placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –º–µ—Å—Ç–æ –ø–æ–∫—É–ø–∫–∏, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏)">{{ expense.description|default:'' }}</textarea>
                            <div class="form-text">–ú–∞–∫—Å–∏–º—É–º 500 —Å–∏–º–≤–æ–ª–æ–≤</div>
                        </div>
                        
                        <div class="d-flex gap-2">
                            <button type="submit" class="btn {% if expense %}btn-warning{% else %}btn-success{% endif %}">
                                <i class="bi {% if expense %}bi-save{% else %}bi-check-circle{% endif %}"></i>
                                {% if expense %}–°–æ—Ö—Ä–∞–Ω–∏—Ç—å{% else %}–î–æ–±–∞–≤–∏—Ç—å{% endif %}
                            </button>
                            <a href="{% url 'expense-list' %}" class="btn btn-secondary">
                                <i class="bi bi-x-circle"></i> –û—Ç–º–µ–Ω–∞
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}